import{d as v,r as i,a as w,c as n,b as e,e as r,w as h,v as k,f as b,F as p,g as y,o,t as a,_ as c}from"./index-BOYamuMt.js";const M=v({name:"AiView",setup(){const t=i(""),s=i([]),d=i(!1);return{message:t,result:s,isLoading:d,sendMessage:()=>{if(!t.value.trim()){alert("請輸入問題");return}d.value=!0,s.value=[],console.log(t.value),t.value.endsWith("？")||(t.value+="？"),w.get("https://knowledge-base-backend.leechiuhui.workers.dev/generateBeddings/"+encodeURIComponent(t.value),{headers:{"Content-Type":"application/json"}}).then(l=>{console.log(l),s.value=l.data,d.value=!1}).catch(l=>{console.error(l),d.value=!1})},formatMetadata:l=>JSON.stringify(l,null,2),downloadFile:l=>{console.log(l);const u="https://knowledge-base-backend.leechiuhui.workers.dev/api/download/"+l.filename;window.open(u,"_blank")}}}}),C={class:"ui segment"},F={class:"ui input"},V={class:"result"},$={key:0},A={class:"ui celled table"},B=["onClick"],D={key:2};function I(t,s,d,g,f,m){return o(),n("main",null,[s[8]||(s[8]=e("h1",{class:"ui header"},"AI機器人-創源工具RAG",-1)),e("div",C,[s[6]||(s[6]=r("輸入創源工具問題和R2資料庫文件做向量比對，取最高分的2個文件內容回傳。")),s[7]||(s[7]=e("p",null,"請輸入問題",-1)),e("div",F,[h(e("input",{autofocus:"",type:"text",placeholder:"請輸入問題..","onUpdate:modelValue":s[0]||(s[0]=l=>t.message=l),onKeyup:s[1]||(s[1]=b((...l)=>t.sendMessage&&t.sendMessage(...l),["enter"]))},null,544),[[k,t.message]]),e("button",{class:"ui button",onClick:s[2]||(s[2]=(...l)=>t.sendMessage&&t.sendMessage(...l))},"送出")]),e("div",V,[t.isLoading?(o(),n("p",$,"載入中，請稍候...")):t.result.length>0?(o(),n(p,{key:1},[s[5]||(s[5]=e("h1",null,"查詢結果列表如下",-1)),e("table",A,[s[4]||(s[4]=e("thead",null,[e("tr",null,[e("th",null,"序號"),e("th",null,"問題"),e("th",null,"答案"),e("th",null,"匹配ID"),e("th",null,"相似度分數"),e("th",null,"MetaData"),e("th",null,"動作")])],-1)),e("tbody",null,[(o(!0),n(p,null,y(t.result,(l,u)=>(o(),n("tr",{key:u},[e("td",null,a(u+1),1),e("td",null,a(t.message),1),e("td",null,a(l.aiResponse),1),e("td",null,a(l.id),1),e("td",null,a(l.score.toFixed(2)),1),e("td",null,[e("pre",null,a(t.formatMetadata(l.metadata)),1)]),e("td",null,[e("button",{class:"ui primary button",onClick:R=>t.downloadFile(l.metadata),style:{"min-width":"10em"}},s[3]||(s[3]=[e("i",{class:"download icon"},null,-1),r("下載檔案")]),8,B)])]))),128))])])],64)):(o(),n("p",D,"未找到相關結果"))])])])}const N=c(M,[["render",I],["__scopeId","data-v-52e76c36"]]);export{N as default};
