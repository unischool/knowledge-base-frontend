import{d as v,r as u,b as g,c as n,a as e,w as m,v as f,e as h,F as k,f as b,n as w,o,t as a,g as y,_ as M}from"./index-CUFlK6O0.js";const F=v({name:"AiView",setup(){const t=u(""),s=u([]),d=u(!1);return{message:t,result:s,isLoading:d,sendMessage:()=>{if(!t.value.trim()){alert("請輸入問題");return}d.value=!0,s.value=[],t.value.endsWith("？")||(t.value+="？"),g.get("https://knowledge-base-backend.leechiuhui.workers.dev/generateBeddings/"+encodeURIComponent(t.value),{headers:{"Content-Type":"application/json"}}).then(l=>{s.value=l.data,d.value=!1}).catch(l=>{console.error(l),d.value=!1})},formatMetadata:l=>JSON.stringify(l,null,2),downloadFile:l=>{const i="https://knowledge-base-backend.leechiuhui.workers.dev/api/download/"+l.filename;window.open(i,"_blank")}}}}),C={class:"ui container"},D={class:"ui grid"},A={class:"row"},V={class:"column"},_={class:"ui segment color-block",style:{"background-color":"#FFD966"}},$={class:"ui input-area"},B={class:"ui input"},I={class:"row"},L={class:"column"},N={class:"ui segment color-block",style:{"background-color":"#A9D08E"}},R={key:0},T={key:1,class:"ui celled table"},U=["onClick"],E={key:2};function K(t,s,d,r,p,c){return o(),n("main",null,[s[9]||(s[9]=e("h1",{class:"ui header"},"AI機器人-創源工具RAG",-1)),e("div",C,[e("div",D,[e("div",A,[e("div",V,[e("div",_,[s[3]||(s[3]=e("h3",null,"輸入問題",-1)),s[4]||(s[4]=e("p",null,"請輸入創源工具相關問題進行查詢。",-1)),e("div",$,[e("div",B,[m(e("input",{autofocus:"",type:"text",placeholder:"請輸入問題...","onUpdate:modelValue":s[0]||(s[0]=l=>t.message=l),onKeyup:s[1]||(s[1]=h((...l)=>t.sendMessage&&t.sendMessage(...l),["enter"]))},null,544),[[f,t.message]])]),e("button",{class:"ui button",onClick:s[2]||(s[2]=(...l)=>t.sendMessage&&t.sendMessage(...l))},"送出")])])])]),e("div",I,[e("div",L,[e("div",N,[s[7]||(s[7]=e("h3",null,"查詢結果",-1)),t.isLoading?(o(),n("p",R,"載入中，目前要等大概15秒以上..請稍候...")):t.result.length>0?(o(),n("table",T,[s[6]||(s[6]=e("thead",null,[e("tr",null,[e("th",null,"問題"),e("th",null,"答案"),e("th",null,"匹配ID"),e("th",null,"相似度分數"),e("th",null,"MetaData"),e("th",null,"動作")])],-1)),e("tbody",null,[(o(!0),n(k,null,b(t.result,(l,i)=>(o(),n("tr",{key:i},[e("td",null,a(t.message),1),e("td",null,a(l.aiResponse),1),e("td",null,a(l.id),1),e("td",null,a(l.score.toFixed(2)),1),e("td",null,[e("pre",null,a(t.formatMetadata(l.metadata)),1)]),e("td",null,[e("button",{class:"ui primary button",onClick:S=>t.downloadFile(l.metadata)},[s[5]||(s[5]=e("i",{class:"download icon"},null,-1)),y("下載【"+a(l.metadata.filename)+"】",1)],8,U)])]))),128))])])):(o(),n("p",E,"未找到相關結果"))])])]),e("div",{class:w(["ui dimmer",{active:t.isLoading}])},s[8]||(s[8]=[e("div",{class:"ui loader"},null,-1)]),2)])])])}const z=M(F,[["render",K],["__scopeId","data-v-c1a01c1b"]]);export{z as default};
