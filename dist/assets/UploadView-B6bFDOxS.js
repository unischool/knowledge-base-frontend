import{c as r,b as l,w as n,v as d,j as p,h as u,o,_ as f,a as h}from"./index-FaWwXZno.js";const m={key:0,class:"ui dimmer active"};function w(s,e,g,b,i,a){return o(),r("div",null,[l("form",{class:"ui form container",onSubmit:e[2]||(e[2]=p((...t)=>a.handleSubmit&&a.handleSubmit(...t),["prevent"]))},[e[3]||(e[3]=l("h2",{class:"ui header"},"上傳文件到知識庫",-1)),l("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>a.handleFileChange&&a.handleFileChange(...t)),required:""},null,32),n(l("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t),placeholder:"Enter password",required:""},null,512),[[d,i.password]]),e[4]||(e[4]=l("button",{class:"ui button",type:"submit"},"Upload",-1))],32),i.uploading?(o(),r("div",m,e[5]||(e[5]=[l("div",{class:"ui loader"},null,-1)]))):u("",!0)])}const c={data(){return{file:null,password:"",uploading:!1}},methods:{async handleFileChange(s){if(this.file=s.target.files[0],!this.file){alert("No file selected.");return}},async handleSubmit(){if(!this.file||!this.password){alert("Please select a file and enter a password.");return}const s=new FormData;s.append("file",this.file),s.append("password",this.password),s.append("filename",this.file.name),s.append("type",this.file.type);try{this.uploading=!0,(await h.post("https://knowledge-base-backend.leechiuhui.workers.dev/write_file",s)).status===200?(alert("File uploaded successfully!"),this.uploading=!1,this.$emit("fileUploaded")):(alert("Failed to upload file."),this.uploading=!1)}catch(e){console.error("Error uploading file:",e),alert("An error occurred while uploading the file."),this.uploading=!1}}}},v=f(c,[["render",w]]);export{v as default};
