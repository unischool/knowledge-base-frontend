import{d as c,a as h,c as a,b as s,h as d,w as p,v as g,e as m,g as u,F as k,f as y,o as n,t as b,_ as f}from"./index-savKusFk.js";const v=c({name:"FullTextSearchView",data(){return{searchQuery:"",isLoading:!1,searchResults:[]}},methods:{search(){if(!this.searchQuery.trim()){alert("請輸入搜尋關鍵字");return}this.isLoading=!0,h.get("https://knowledge-base-backend.leechiuhui.workers.dev/api/search/"+encodeURIComponent(this.searchQuery)).then(e=>{this.searchResults=e.data,this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1})},goToResult(e){const t="https://knowledge-base-backend.leechiuhui.workers.dev/api/download/"+e;window.open(t,"_blank")},escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},highlightKeyword(e){if(!this.searchQuery)return this.escapeHtml(e);const t=this.escapeHtml(e),l=this.escapeHtml(this.searchQuery),i=new RegExp(l,"gi");return t.replace(i,r=>`<mark>${r}</mark>`)}}}),w={class:"ui container"},L={key:0,class:"ui active dimmer"},Q={class:"ui segment color-block",style:{"background-color":"#FFD966"}},R={class:"ui input-area"},T={class:"ui input"},C={key:1,class:"ui segment color-block",style:{"background-color":"#A9D08E","margin-top":"20px"}},F={class:"ui stackable celled table"},H=["innerHTML"],V={class:"actions"},$=["onClick"],D={key:2};function K(e,t,l,i,r,B){return n(),a("div",w,[e.isLoading?(n(),a("div",L,t[3]||(t[3]=[s("div",{class:"ui text loader"},"搜尋中...",-1)]))):d("",!0),s("div",Q,[t[5]||(t[5]=s("h1",null,"全文檢索 - 創源工具",-1)),s("div",R,[s("div",T,[p(s("input",{type:"text",autofocus:"","onUpdate:modelValue":t[0]||(t[0]=o=>e.searchQuery=o),placeholder:"請輸入搜尋關鍵字...",onKeyup:t[1]||(t[1]=m((...o)=>e.search&&e.search(...o),["enter"]))},null,544),[[g,e.searchQuery]])]),s("button",{class:"ui button primary",onClick:t[2]||(t[2]=(...o)=>e.search&&e.search(...o))},t[4]||(t[4]=[s("i",{class:"search icon"},null,-1),u("搜尋")]))])]),e.searchResults.length>0?(n(),a("div",C,[t[8]||(t[8]=s("h2",null,"查詢結果",-1)),s("table",F,[t[7]||(t[7]=s("thead",null,[s("tr",null,[s("th",null,"檔案名稱"),s("th",null,"內文"),s("th",{class:"actions"},"操作")])],-1)),s("tbody",null,[(n(!0),a(k,null,y(e.searchResults,o=>(n(),a("tr",{key:o.filename},[s("td",null,[s("div",null,b(o.filename),1)]),s("td",null,[s("div",{innerHTML:e.highlightKeyword(o.content)},null,8,H)]),s("td",V,[s("button",{class:"ui primary button",onClick:E=>e.goToResult(o.filename)},t[6]||(t[6]=[s("i",{class:"download icon"},null,-1),u("下載檔案")]),8,$)])]))),128))])])])):e.isLoading?d("",!0):(n(),a("p",D,"未找到相關結果"))])}const N=f(v,[["render",K],["__scopeId","data-v-44d71083"]]);export{N as default};
