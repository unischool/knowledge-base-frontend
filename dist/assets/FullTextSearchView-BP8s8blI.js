import{d as c,a as h,c as n,b as s,h as d,w as p,v as g,f as m,e as u,F as f,g as y,o as l,t as k,_ as v}from"./index-RcH21bp3.js";const w=c({name:"FullTextSearchView",data(){return{searchQuery:"",isLoading:!1,searchResults:[]}},methods:{search(){this.isLoading=!0,h.get("https://knowledge-base-backend.leechiuhui.workers.dev/api/search/"+encodeURIComponent(this.searchQuery)).then(e=>{this.searchResults=e.data,this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1})},goToResult(e){const t="https://knowledge-base-backend.leechiuhui.workers.dev/api/download/"+e;window.open(t,"_blank")},escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},highlightKeyword(e){if(!this.searchQuery)return this.escapeHtml(e);const t=this.escapeHtml(e),i=this.escapeHtml(this.searchQuery),o=new RegExp(i,"gi");return t.replace(o,r=>`<mark>${r}</mark>`)}}}),b={class:"ui container"},L={key:0,class:"ui active dimmer"},R={class:"ui form"},T={class:"field"},C={class:"ui action input"},Q={key:1,class:"ui segment",id:"search-results"},H={class:"ui stackable celled table"},V=["innerHTML"],$={class:"actions"},F=["onClick"];function K(e,t,i,o,r,B){return l(),n("div",b,[e.isLoading?(l(),n("div",L,t[3]||(t[3]=[s("div",{class:"ui text loader"},"搜尋中...",-1)]))):d("",!0),t[7]||(t[7]=s("h1",null,"全文檢索-創源工具",-1)),s("div",R,[s("div",T,[s("div",C,[p(s("input",{type:"text",autofocus:"","onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery=a),placeholder:"請輸入搜尋關鍵字...",onKeyup:t[1]||(t[1]=m((...a)=>e.search&&e.search(...a),["enter"]))},null,544),[[g,e.searchQuery]]),s("button",{class:"ui button primary",onClick:t[2]||(t[2]=(...a)=>e.search&&e.search(...a))},t[4]||(t[4]=[s("i",{class:"search icon"},null,-1),u("搜尋")]))])])]),e.searchResults.length>0?(l(),n("div",Q,[s("table",H,[t[6]||(t[6]=s("thead",null,[s("tr",null,[s("th",null,"檔案名稱"),s("th",null,"內文"),s("th",{class:"actions"},"操作")])],-1)),s("tbody",null,[(l(!0),n(f,null,y(e.searchResults,a=>(l(),n("tr",null,[s("td",null,[s("div",null,k(a.filename),1)]),s("td",null,[s("div",{innerHTML:e.highlightKeyword(a.content)},null,8,V)]),s("td",$,[s("button",{class:"ui primary button",onClick:M=>e.goToResult(a.filename)},t[5]||(t[5]=[s("i",{class:"download icon"},null,-1),u("下載檔案")]),8,F)])]))),256))])])])):d("",!0)])}const S=v(w,[["render",K],["__scopeId","data-v-349f2efa"]]);export{S as default};
