import{d as f,r,a as v,c as a,b as e,e as m,w as h,v as y,f as M,F as k,g as b,o,t as u,_ as w}from"./index-BIuIV_tv.js";const D=f({name:"DragoTestingView",setup(){const t=r(""),s=r([]),d=r(!1);return{message:t,result:s,isLoading:d,sendMessage:()=>{if(!t.value.trim()){alert("請輸入問題");return}d.value=!0,s.value=[],console.log(t.value),t.value.endsWith("？")||(t.value+="？"),v.get("https://knowledge-base-backend.leechiuhui.workers.dev/generateBeddings/"+encodeURIComponent(t.value),{headers:{"Content-Type":"application/json"}}).then(l=>{console.log(l),s.value=l.data,d.value=!1}).catch(l=>{console.error(l),d.value=!1})},formatMetadata:l=>JSON.stringify(l,null,2)}}}),c={class:"ui segment"},T={class:"ui input"},V={class:"result"},B={key:0},C={key:1},$={class:"ui celled table"},F={key:2};function I(t,s,d,g,p,l){return o(),a("main",null,[s[7]||(s[7]=e("h1",{class:"ui header"},"Drago測試",-1)),e("div",c,[s[5]||(s[5]=m("輸入創源工具問題和R2資料庫文件做向量比對，取最高分的2個文件內容回傳。")),s[6]||(s[6]=e("p",null,"請輸入問題",-1)),e("div",T,[h(e("input",{autofocus:"",type:"text",placeholder:"請輸入問題..","onUpdate:modelValue":s[0]||(s[0]=n=>t.message=n),onKeyup:s[1]||(s[1]=M((...n)=>t.sendMessage&&t.sendMessage(...n),["enter"]))},null,544),[[y,t.message]]),e("button",{class:"ui button",onClick:s[2]||(s[2]=(...n)=>t.sendMessage&&t.sendMessage(...n))},"送出")]),e("div",V,[t.isLoading?(o(),a("p",B,"載入中，請稍候...")):t.result.length>0?(o(),a("p",C,[s[4]||(s[4]=e("h1",null,"查詢結果列表如下",-1)),e("table",$,[e("thead",null,[s[3]||(s[3]=e("tr",null,[e("th",null,"序號"),e("th",null,"問題"),e("th",null,"答案"),e("th",null,"匹配ID"),e("th",null,"相似度分數"),e("th",null,"MetaData"),e("tbody")],-1)),(o(!0),a(k,null,b(t.result,(n,i)=>(o(),a("tr",{key:i},[e("td",null,u(i+1),1),e("td",null,u(t.message),1),e("td",null,u(n.aiResponse),1),e("td",null,u(n.id),1),e("td",null,u(n.score.toFixed(2)),1),e("td",null,[e("pre",null,u(t.formatMetadata(n.metadata)),1)])]))),128))])])])):(o(),a("p",F,"未找到相關結果"))])])])}const N=w(D,[["render",I],["__scopeId","data-v-134e59e7"]]);export{N as default};
