import{d as f,r as d,a as w,c as t,b as s,e as u,w as k,v as b,f as y,F as r,g as h,n as M,o,t as p,_ as c}from"./index-CUAtr2Ol.js";const C=f({name:"AiView",setup(){const n=d(""),e=d([]),a=d(!1);return{message:n,result:e,isLoading:a,sendMessage:()=>{if(!n.value.trim()){alert("請輸入問題");return}a.value=!0,e.value=[],console.log(n.value),n.value.endsWith("？")||(n.value+="？"),w.get("https://knowledge-base-backend.leechiuhui.workers.dev/generateBeddings/"+encodeURIComponent(n.value),{headers:{"Content-Type":"application/json"}}).then(l=>{console.log(l),e.value=l.data,a.value=!1}).catch(l=>{console.error(l),a.value=!1})},formatMetadata:l=>JSON.stringify(l,null,2),downloadFile:l=>{console.log(l);const i="https://knowledge-base-backend.leechiuhui.workers.dev/api/download/"+l.filename;window.open(i,"_blank")}}}}),F={class:"ui segment"},V={class:"ui input"},$={class:"result"},A={key:0},B={class:"ui celled table"},L=["onClick"],R={key:2};function I(n,e,a,g,m,v){return o(),t("main",null,[e[9]||(e[9]=s("h1",{class:"ui header"},"AI機器人-創源工具RAG",-1)),s("div",F,[e[7]||(e[7]=u("輸入創源工具問題和R2資料庫文件做向量比對，取最高分的2個文件內容回傳。")),e[8]||(e[8]=s("p",null,"請輸入問題",-1)),s("div",V,[k(s("input",{autofocus:"",type:"text",placeholder:"請輸入問題..","onUpdate:modelValue":e[0]||(e[0]=l=>n.message=l),onKeyup:e[1]||(e[1]=y((...l)=>n.sendMessage&&n.sendMessage(...l),["enter"]))},null,544),[[b,n.message]]),s("button",{class:"ui button",onClick:e[2]||(e[2]=(...l)=>n.sendMessage&&n.sendMessage(...l))},"送出")]),s("div",$,[n.isLoading?(o(),t("p",A,"載入中，請稍候...")):n.result.length>0?(o(),t(r,{key:1},[e[5]||(e[5]=s("h1",null,"查詢結果列表如下",-1)),s("table",B,[e[4]||(e[4]=s("thead",null,[s("tr",null,[s("th",null,"問題"),s("th",null,"答案"),s("th",null,"動作")])],-1)),s("tbody",null,[(o(!0),t(r,null,h(n.result,(l,i)=>(o(),t("tr",{key:i},[s("td",null,p(n.message),1),s("td",null,p(l.aiResponse),1),s("td",null,[s("button",{class:"ui primary button",onClick:N=>n.downloadFile(l.metadata),style:{"min-width":"10em"}},e[3]||(e[3]=[s("i",{class:"download icon"},null,-1),u("下載檔案")]),8,L)])]))),128))])])],64)):(o(),t("p",R,"未找到相關結果"))]),s("div",{class:M(["ui dimmer",{active:n.isLoading}])},e[6]||(e[6]=[s("div",{class:"ui loader"},null,-1)]),2)])])}const U=c(C,[["render",I],["__scopeId","data-v-6ad38593"]]);export{U as default};
